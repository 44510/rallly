angular.module("rallly",["ui.router","ngResource","ngFx"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,n){n.html5Mode(!0),e.otherwise("/notfound"),t.state("index",{url:"/",templateUrl:"templates/new.html",controller:"NewEventCtrl"}).state("about",{url:"/about",templateUrl:"templates/about.html"}).state("notfound",{url:"/notfound",templateUrl:"templates/notfound.html"}).state("event",{url:"/:id",templateUrl:"templates/event.html",controller:"EventCtrl"})}]).factory("Event",["$resource",function(t){return t("/api/event/:id",{id:"@_id"},{update:{method:"PUT"}})}]).factory("Participant",["$resource",function(t){return t("/api/event/:id/participant/:pid",{id:"@_id",pid:"@pid"},{update:{method:"PUT"}})}]),angular.module("rallly").controller("EventCtrl",["$scope","$http","$state","Event","Participant",function(t,e,n,r,i){$(".nav-link").removeClass("active");var a=n.params.id;t.event=r.get({id:a},function(){},function(){n.go("notfound")}),t.delete=function(e){confirm("Are you sure you want to remove "+e.name+"?")&&i.remove({id:a,pid:e._id},function(e){t.event=e})},t.defaults=[],t.update=function(e){i.update({id:t.event._id,pid:e._id},e)},t.edit=function(e){t.defaults[t.event.participants.indexOf(e)]=angular.copy(e)},t.cancel=function(e){t.event.participants[e]=t.defaults[e]},t.save=function(e){var e=new i(e);e.$save({id:a},function(e){t.event=e,t.participant={}})}}]),angular.module("rallly").controller("NewEventCtrl",["$scope","$http","$state",function(t,e,n){$(".nav-link[href='/']").addClass("active"),t.event={},t.isNewEvent=!0,t.submit=function(){e.post("/api/event",t.event).success(function(e){t.event=e,t.eventUrl=n.href("event",{id:t.event._id},{absolute:!0})}).error(function(e){t.errors=e.errors})},t.clearDates=null}]).directive("datepicker",function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,r){$(e).datepicker({multidate:!0,todayHighlight:!0,format:"dd/mm/yyyy"}).on("changeDate",function(t){var e=t.dates;e.sort(function(t,e){return t.getTime()>e.getTime()?!0:!1}),r.$setViewValue(e,t)}),t.clearDates=function(){$(e).datepicker("setDate",null)},t.unsetDate=function(n){$(e).datepicker("setDates",t.event.dates.filter(function(t){return t!=n}))}}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb250cm9sbGVycy9ldmVudC5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbmV3ZXZlbnQuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxRQUFBLE9BQUEsVUFBQSxZQUFBLGFBQUEsU0FDQSxRQUFBLGlCQUFBLHFCQUFBLG9CQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxXQUFBLEdBQ0EsRUFBQSxVQUFBLGFBQ0EsRUFDQSxNQUFBLFNBQ0EsSUFBQSxJQUNBLFlBQUEscUJBQ0EsV0FBQSxpQkFFQSxNQUFBLFNBQ0EsSUFBQSxTQUNBLFlBQUEseUJBRUEsTUFBQSxZQUNBLElBQUEsWUFDQSxZQUFBLDRCQUVBLE1BQUEsU0FDQSxJQUFBLE9BQ0EsWUFBQSx1QkFDQSxXQUFBLGlCQUdBLFFBQUEsU0FBQSxZQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsa0JBQUEsR0FBQSxTQUNBLFFBQUEsT0FBQSxZQUdBLFFBQUEsZUFBQSxZQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsbUNBQUEsR0FBQSxPQUFBLElBQUEsU0FDQSxRQUFBLE9BQUEsWUMvQkEsUUFBQSxPQUFBLFVBQ0EsV0FBQSxhQUFBLFNBQUEsUUFBQSxTQUFBLFFBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGFBQUEsWUFBQSxTQUNBLElBQUEsR0FBQSxFQUFBLE9BQUEsRUFDQSxHQUFBLE1BQUEsRUFBQSxLQUFBLEdBQUEsR0FBQSxhQUFBLFdBQ0EsRUFBQSxHQUFBLGNBRUEsRUFBQSxPQUFBLFNBQUEsR0FDQSxRQUFBLG1DQUFBLEVBQUEsS0FBQSxNQUNBLEVBQUEsUUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxLQUlBLEVBQUEsWUFFQSxFQUFBLE9BQUEsU0FBQSxHQUNBLEVBQUEsUUFDQSxHQUFBLEVBQUEsTUFBQSxJQUNBLElBQUEsRUFBQSxLQUNBLElBRUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxNQUFBLGFBQUEsUUFBQSxJQUFBLFFBQUEsS0FBQSxJQUdBLEVBQUEsT0FBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLGFBQUEsR0FBQSxFQUFBLFNBQUEsSUFHQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEdBQUEsRUFDQSxHQUFBLE9BQUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsRUFDQSxFQUFBLHFCQ2xDQSxRQUFBLE9BQUEsVUFDQSxXQUFBLGdCQUFBLFNBQUEsUUFBQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSx1QkFBQSxTQUFBLFVBQ0EsRUFBQSxTQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsS0FBQSxhQUFBLEVBQUEsT0FDQSxRQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxLQUFBLFNBQ0EsR0FBQSxFQUFBLE1BQUEsTUFFQSxVQUFBLE1BSUEsTUFBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsVUFHQSxFQUFBLFdBQUEsUUFFQSxVQUFBLGFBQUEsV0FDQSxPQUNBLFNBQUEsSUFDQSxRQUFBLFVBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLFlBQ0EsV0FBQSxFQUNBLGdCQUFBLEVBQ0EsT0FBQSxlQUVBLEdBQUEsYUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FDQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLFVBQUEsRUFBQSxXQUFBLEdBQ0EsSUFFQSxFQUFBLGNBQUEsRUFBQSxLQUdBLEVBQUEsV0FBQSxXQUNBLEVBQUEsR0FBQSxXQUFBLFVBQUEsT0FFQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxXQUFBLFdBQUEsRUFBQSxNQUFBLE1BQUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBIiwiZmlsZSI6InB1YmxpYy9idWlsZC9hcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgncmFsbGx5JywgWyd1aS5yb3V0ZXInLCduZ1Jlc291cmNlJywnbmdGeCddKVxuICAgIC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpe1xuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvbm90Zm91bmRcIilcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgLnN0YXRlKCdpbmRleCcse1xuICAgICAgICAgICAgdXJsIDogJy8nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndGVtcGxhdGVzL25ldy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnTmV3RXZlbnRDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgICAgICAgdXJsIDogJy9hYm91dCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICd0ZW1wbGF0ZXMvYWJvdXQuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdub3Rmb3VuZCcsIHtcbiAgICAgICAgICAgIHVybCA6ICcvbm90Zm91bmQnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndGVtcGxhdGVzL25vdGZvdW5kLmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnZXZlbnQnLHtcbiAgICAgICAgICAgIHVybCA6ICcvOmlkJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3RlbXBsYXRlcy9ldmVudC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnRXZlbnRDdHJsJ1xuICAgICAgICB9KVxuICAgIH0pXG4gICAgLmZhY3RvcnkoJ0V2ZW50JywgZnVuY3Rpb24oJHJlc291cmNlKXtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnL2FwaS9ldmVudC86aWQnLCB7IGlkIDogJ0BfaWQnIH0sIHtcbiAgICAgICAgICAgICd1cGRhdGUnIDogeyBtZXRob2QgOiAnUFVUJyB9XG4gICAgICAgIH0pO1xuICAgIH0pXG4gICAgLmZhY3RvcnkoJ1BhcnRpY2lwYW50JywgZnVuY3Rpb24oJHJlc291cmNlKXtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnL2FwaS9ldmVudC86aWQvcGFydGljaXBhbnQvOnBpZCcsIHsgaWQ6ICdAX2lkJywgcGlkIDogJ0BwaWQnfSwge1xuICAgICAgICAgICAgJ3VwZGF0ZScgOiB7IG1ldGhvZCA6ICdQVVQnIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgncmFsbGx5Jylcbi5jb250cm9sbGVyKCdFdmVudEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkc3RhdGUsIEV2ZW50LCBQYXJ0aWNpcGFudCl7XG4gICAgJChcIi5uYXYtbGlua1wiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgdmFyIGlkID0gJHN0YXRlLnBhcmFtcy5pZDtcbiAgICAkc2NvcGUuZXZlbnQgPSBFdmVudC5nZXQoe2lkOmlkfSwgZnVuY3Rpb24oZGF0YSl7fSwgZnVuY3Rpb24oZSl7XG4gICAgICAgICRzdGF0ZS5nbygnbm90Zm91bmQnKTtcbiAgICB9KTtcbiAgICAkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24ocGFydGljaXBhbnQpe1xuICAgICAgICBpZiAoY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZW1vdmUgXCIrcGFydGljaXBhbnQubmFtZStcIj9cIikpe1xuICAgICAgICAgICAgUGFydGljaXBhbnQucmVtb3ZlKHsgaWQgOiBpZCAsIHBpZCA6IHBhcnRpY2lwYW50Ll9pZCB9LCBmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkc2NvcGUuZGVmYXVsdHMgPSBbXTtcblxuICAgICRzY29wZS51cGRhdGUgPSBmdW5jdGlvbihwYXJ0aWNpcGFudCl7XG4gICAgICAgIFBhcnRpY2lwYW50LnVwZGF0ZSh7XG4gICAgICAgICAgICBpZCA6ICRzY29wZS5ldmVudC5faWQsXG4gICAgICAgICAgICBwaWQgOiBwYXJ0aWNpcGFudC5faWRcbiAgICAgICAgfSwgcGFydGljaXBhbnQpO1xuICAgIH1cbiAgICAkc2NvcGUuZWRpdCA9IGZ1bmN0aW9uKHBhcnRpY2lwYW50KXtcbiAgICAgICAgJHNjb3BlLmRlZmF1bHRzWyRzY29wZS5ldmVudC5wYXJ0aWNpcGFudHMuaW5kZXhPZihwYXJ0aWNpcGFudCldID0gYW5ndWxhci5jb3B5KHBhcnRpY2lwYW50KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgICAkc2NvcGUuZXZlbnQucGFydGljaXBhbnRzW2luZGV4XSA9ICRzY29wZS5kZWZhdWx0c1tpbmRleF07XG4gICAgfVxuXG4gICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbihwYXJ0aWNpcGFudCl7XG4gICAgICAgIHZhciBwYXJ0aWNpcGFudCA9IG5ldyBQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCk7XG4gICAgICAgIHBhcnRpY2lwYW50LiRzYXZlKHtpZDppZH0sIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgICRzY29wZS5ldmVudCA9IGV2ZW50O1xuICAgICAgICAgICAgJHNjb3BlLnBhcnRpY2lwYW50ID0ge307XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3JhbGxseScpXG4uY29udHJvbGxlcignTmV3RXZlbnRDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHN0YXRlKXtcbiAgICAkKFwiLm5hdi1saW5rW2hyZWY9Jy8nXVwiKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgJHNjb3BlLmV2ZW50ID0ge307XG4gICAgJHNjb3BlLmlzTmV3RXZlbnQgPSB0cnVlO1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2V2ZW50JywgJHNjb3BlLmV2ZW50KVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihldmVudCwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpe1xuICAgICAgICAgICAgJHNjb3BlLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICAkc2NvcGUuZXZlbnRVcmwgPSAkc3RhdGUuaHJlZignZXZlbnQnLCB7XG4gICAgICAgICAgICAgICAgaWQ6ICRzY29wZS5ldmVudC5faWRcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBhYnNvbHV0ZSA6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gJHN0YXRlLmdvKCdldmVudCcse2lkIDogZGF0YS5ldmVudC5faWR9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKXtcbiAgICAgICAgICAgICRzY29wZS5lcnJvcnMgPSBkYXRhLmVycm9ycztcbiAgICAgICAgfSlcbiAgICB9XG4gICAgJHNjb3BlLmNsZWFyRGF0ZXMgPSBudWxsXG59KVxuLmRpcmVjdGl2ZSgnZGF0ZXBpY2tlcicsIGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3QgOiAnQScsXG4gICAgICAgIHJlcXVpcmUgOiAnbmdNb2RlbCcsXG4gICAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHJzLCBuZ01vZGVsKXtcbiAgICAgICAgICAgICQoZWwpLmRhdGVwaWNrZXIoe1xuICAgICAgICAgICAgICAgIG11bHRpZGF0ZSA6IHRydWUsXG4gICAgICAgICAgICAgICAgdG9kYXlIaWdobGlnaHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZm9ybWF0IDogJ2RkL21tL3l5eXknXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdjaGFuZ2VEYXRlJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGVzID0gZS5kYXRlcztcbiAgICAgICAgICAgICAgICBkYXRlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoYS5nZXRUaW1lKCkgPiBiLmdldFRpbWUoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoZGF0ZXMsIGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNjb3BlLmNsZWFyRGF0ZXMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQoZWwpLmRhdGVwaWNrZXIoJ3NldERhdGUnLCBudWxsKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNjb3BlLnVuc2V0RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpe1xuICAgICAgICAgICAgICAgICQoZWwpLmRhdGVwaWNrZXIoJ3NldERhdGVzJywgc2NvcGUuZXZlbnQuZGF0ZXMuZmlsdGVyKGZ1bmN0aW9uKGVsKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsICE9IGRhdGU7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9