<div ng-show="event">
    <div class="event-details">
        <h1>{{event.title}}</h1>
        <ul class="event-detail-list">
            <li class="event-created-by">
                Created by <a href="{{event.creator.email}}">{{event.creator.name}}</a>
            </li>
            <li>
                Created on {{event.created | date : 'short'}}
            </li>
            <li>
                Last updated {{event.updated | date : 'short'}}
            </li>
            <li ng-show="event.location" class="event-location">
                {{event.location}}
            </li>
            <li ng-show="event.participants.length">
                {{event.participants.length}} participants
            </li>
        </ul>
        <div ng-show="event.description" class="event-description">{{event.description}}</div>
    </div>

    <h2>When can you make it?</h2>
    <section class="rl-section">
            <form ng-submit="save(participant)">
                <table class="event-poll">
                    <thead>
                        <tr>
                            <th class="event-poll-participants">
                                {{event.participants.length}} participants
                            </th>
                            <th class="center" ng-repeat="date in event.dates">
                                <div class="daticon">
                                    <div class="dow">
                                        {{date | date: 'EEE'}}
                                    </div>
                                    <div class="day">
                                        {{date | date: 'd'}}
                                    </div>
                                    <div class="month">
                                        {{date | date : 'MMM'}}
                                    </div>
                                </div>
                            </th>
                            <th width="160">

                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="event-poll-entry" ng-repeat="participant in event.participants" ng-model="participant">
                            <td class="event-poll-user">
                                <img src="/images/user_gray@2x.png" width="11" />
                                <input type="text" class="form-control" ng-model="participant.name" ng-show="editMode" value="participant.name"/>
                                <span ng-hide="editMode" class="event-poll-name">{{participant.name}}</span>
                            </td>
                            <td class="center" ng-repeat="date in event.dates">
                                <img src="/images/tick@2x.png"  width="16" ng-hide="editMode" ng-if="participant.dates[$index]" />
                                <img src="/images/nope@2x.png" width="8" ng-hide="editMode" ng-if="!participant.dates[$index]" />
                                <input ng-model="participant.dates[$index]" ng-show="editMode" ng-false-value="false" type="checkbox" />
                            </td>
                            <td>
                                <a ng-hide="editMode" href="javascript:" ng-click="editMode = true; edit(participant)" class="btn-primary">Edit</a>
                                <a ng-hide="editMode" href="javascript:" ng-click="delete(participant)" class="btn-primary">Delete</a>
                                <a ng-show="editMode" href="javascript:" ng-click="editMode = false; update(participant)" class="btn-primary">Save</a>
                                <a ng-show="editMode" href="javascript:" ng-click="editMode = false; cancel($index)" class="btn-primary">Cancel</a>
                            </td>
                        </tr>
                        <tr class="event-poll-input">
                            <td class="event-poll-user">
                                <img src="/images/user_gray@2x.png" width="11" />
                                <input type="text" class="form-control" ng-model="participant.name" placeholder="Your name..."/>
                            </td>
                            <td class="center" ng-repeat="date in event.dates">
                                <input ng-model="participant.dates[$index]" ng-false-value="false" type="checkbox" />
                            </td>
                            <td>
                                <button type="submit" class="btn btn-primary">Save</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
    </section>
</div>
